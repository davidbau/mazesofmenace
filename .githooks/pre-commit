#!/bin/bash
# Pre-commit hook: auto-update version files with the next commit number.

NEXT=$(( $(git rev-list --count HEAD) + 1 ))

cat > js/version.js <<EOF
// version.js -- Auto-generated by .githooks/pre-commit. Do not edit by hand.
export const COMMIT_NUMBER = ${NEXT};
EOF

cat > _data/version.yml <<EOF
commit_number: ${NEXT}
EOF

git add js/version.js _data/version.yml

exit 0
