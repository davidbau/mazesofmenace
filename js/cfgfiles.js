// Autogenerated translator module for currently-unmapped C source outputs.
// Contents are syntax-validated emitted functions; wiring into runtime is separate.

// Autotranslated from cfgfiles.c:146
export function get_default_configfile() {
  return default_configfile;
}

// Autotranslated from cfgfiles.c:585
export function find_optparam(buf) {
  let bufp, altp;
  bufp = strchr(buf, '=');
  altp = strchr(buf, ':');
  if (!bufp || (altp && altp < bufp)) bufp = altp;
  return bufp;
}

// Autotranslated from cfgfiles.c:600
export function cnf_line_OPTIONS(origbuf) {
  let bufp = find_optparam(origbuf);
  ++bufp;
  return parseoptions(bufp, true, true);
}

// Autotranslated from cfgfiles.c:609
export function cnf_line_AUTOPICKUP_EXCEPTION(bufp) {
  add_autopickup_exception(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:616
export function cnf_line_BINDINGS(bufp) {
  return parsebindings(bufp);
}

// Autotranslated from cfgfiles.c:622
export function cnf_line_AUTOCOMPLETE(bufp) {
  parseautocomplete(bufp, true);
  return true;
}

// Autotranslated from cfgfiles.c:629
export function cnf_line_MSGTYPE(bufp) {
  return msgtype_parse_add(bufp);
}

// Autotranslated from cfgfiles.c:635
export function cnf_line_HACKDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:650
export function cnf_line_LEVELDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:670
export function cnf_line_SAVEDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:692
export function cnf_line_BONESDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:703
export function cnf_line_DATADIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:714
export function cnf_line_SCOREDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:725
export function cnf_line_LOCKDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:736
export function cnf_line_CONFIGDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:747
export function cnf_line_TROUBLEDIR(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:758
export function cnf_line_NAME(bufp) {
  strncpy(svp.plname, bufp, PL_NSIZ - 1);
  return true;
}

// Autotranslated from cfgfiles.c:765
export function cnf_line_ROLE(bufp, game) {
  let len;
  if ((len = str2role(bufp)) >= 0) game.flags.initrole = len;
  return true;
}

// Autotranslated from cfgfiles.c:775
export function cnf_line_dogname(bufp) {
  strncpy(gd.dogname, bufp, PL_PSIZ - 1);
  return true;
}

// Autotranslated from cfgfiles.c:809
export function cnf_line_SHELLERS(bufp) {
  if (sysopt.shellers) (sysopt.shellers, 0);
  sysopt.shellers = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:818
export function cnf_line_MSGHANDLER(bufp) {
  if (sysopt.msghandler) (sysopt.msghandler, 0);
  sysopt.msghandler = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:827
export function cnf_line_EXPLORERS(bufp) {
  if (sysopt.explorers) (sysopt.explorers, 0);
  sysopt.explorers = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:836
export function cnf_line_DEBUGFILES(bufp) {
  if (!sysopt.env_dbgfl) {
    if (sysopt.debugfiles) (sysopt.debugfiles, 0);
    sysopt.debugfiles = dupstr(bufp);
  }
  return true;
}

// Autotranslated from cfgfiles.c:849
export function cnf_line_DUMPLOGFILE(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:862
export function cnf_line_GENERICUSERS(bufp) {
  if (sysopt.genericusers) (sysopt.genericusers, 0);
  sysopt.genericusers = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:871
export function cnf_line_BONES_POOLS(bufp) {
  let n = atoi(bufp);
  sysopt.bones_pools = (n <= 0) ? 0 : Math.min(n, 10);
  return true;
}

// Autotranslated from cfgfiles.c:885
export function cnf_line_SUPPORT(bufp) {
  if (sysopt.support) (sysopt.support, 0);
  sysopt.support = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:894
export function cnf_line_RECOVER(bufp) {
  if (sysopt.recover) (sysopt.recover, 0);
  sysopt.recover = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:903
export function cnf_line_CHECK_SAVE_UID(bufp) {
  let n = atoi(bufp);
  sysopt.check_save_uid = n;
  return true;
}

// Autotranslated from cfgfiles.c:912
export function cnf_line_CHECK_PLNAME(bufp) {
  let n = atoi(bufp);
  sysopt.check_plname = n;
  return true;
}

// Autotranslated from cfgfiles.c:943
export function cnf_line_HIDEUSAGE(bufp) {
  let n = !!atoi(bufp);
  sysopt.hideusage = n;
  return true;
}

// Autotranslated from cfgfiles.c:952
export function cnf_line_MAXPLAYERS(bufp) {
  let n = atoi(bufp);
  if (n < 0 || n > 25) {
    config_error_add("Illegal value in MAXPLAYERS (maximum is 25)");
    n = 5;
  }
  sysopt.maxplayers = n;
  return true;
}

// Autotranslated from cfgfiles.c:966
export function cnf_line_PERSMAX(bufp) {
  let n = atoi(bufp);
  if (n < 1) {
    config_error_add("Illegal value in PERSMAX (minimum is 1)");
    n = 0;
  }
  sysopt.persmax = n;
  return true;
}

// Autotranslated from cfgfiles.c:979
export function cnf_line_PERS_IS_UID(bufp) {
  let n = atoi(bufp);
  if (n !== 0 && n !== 1) {
    config_error_add("Illegal value in PERS_IS_UID (must be 0 or 1)");
    n = 0;
  }
  sysopt.pers_is_uid = n;
  return true;
}

// Autotranslated from cfgfiles.c:992
export function cnf_line_ENTRYMAX(bufp) {
  let n = atoi(bufp);
  if (n < 10) {
    config_error_add("Illegal value in ENTRYMAX (minimum is 10)");
    n = 10;
  }
  sysopt.entrymax = n;
  return true;
}

// Autotranslated from cfgfiles.c:1005
export function cnf_line_POINTSMIN(bufp) {
  let n = atoi(bufp);
  if (n < 1) {
    config_error_add("Illegal value in POINTSMIN (minimum is 1)");
    n = 100;
  }
  sysopt.pointsmin = n;
  return true;
}

// Autotranslated from cfgfiles.c:1049
export function cnf_line_PANICTRACE_LIBC(bufp) {
  let n = atoi(bufp);
  if (n < 0 || n > 2) {
    config_error_add("Illegal value in PANICTRACE_LIBC (not 0,1,2)");
    n = 0;
  }
  sysopt.panictrace_libc = n;
  return true;
}

// Autotranslated from cfgfiles.c:1064
export function cnf_line_PANICTRACE_GDB(bufp) {
  let n = atoi(bufp);
  if (n < 0 || n > 2) {
    config_error_add("Illegal value in PANICTRACE_GDB (not 0,1,2)");
    n = 0;
  }
  sysopt.panictrace_gdb = n;
  return true;
}

// Autotranslated from cfgfiles.c:1079
export function cnf_line_GDBPATH(bufp) {
  if (!file_exists(bufp)) {
    config_error_add("File specified in GDBPATH does not exist");
    return false;
  }
  if (sysopt.gdbpath) (sysopt.gdbpath, 0);
  sysopt.gdbpath = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:1094
export function cnf_line_GREPPATH(bufp) {
  if (!file_exists(bufp)) {
    config_error_add("File specified in GREPPATH does not exist");
    return false;
  }
  if (sysopt.greppath) (sysopt.greppath, 0);
  sysopt.greppath = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:1109
export function cnf_line_CRASHREPORTURL(bufp) {
  if (sysopt.crashreporturl) (sysopt.crashreporturl, 0);
  sysopt.crashreporturl = dupstr(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:1118
export function cnf_line_ACCESSIBILITY(bufp) {
  let n = atoi(bufp);
  if (n < 0 || n > 1) {
    config_error_add("Illegal value in ACCESSIBILITY (not 0,1)");
    n = 0;
  }
  sysopt.accessibility = n;
  return true;
}

// Autotranslated from cfgfiles.c:1131
export function cnf_line_PORTABLE_DEVICE_PATHS(bufp) {
  nhUse(bufp);
  config_error_add("PORTABLE_DEVICE_PATHS is not supported");
  return true;
}

// Autotranslated from cfgfiles.c:1161
export function cnf_line_MENUCOLOR(bufp) {
  return add_menu_coloring(bufp);
}

// Autotranslated from cfgfiles.c:1167
export function cnf_line_HILITE_STATUS(bufp) {
  return parse_status_hl1(bufp, true);
}

// Autotranslated from cfgfiles.c:1178
export function cnf_line_WARNINGS(bufp) {
  let translate;
  get_uchars(bufp, translate, false, WARNCOUNT, "WARNINGS");
  assign_warnings(translate);
  return true;
}

// Autotranslated from cfgfiles.c:1188
export function cnf_line_ROGUESYMBOLS(bufp) {
  if (parsesymbols(bufp, ROGUESET)) { switch_symbols(true); return true; }
  config_error_add("Error in ROGUESYMBOLS definition '%s'", bufp);
  return false;
}

// Autotranslated from cfgfiles.c:1199
export function cnf_line_SYMBOLS(bufp) {
  if (parsesymbols(bufp, PRIMARYSET)) { switch_symbols(true); return true; }
  config_error_add("Error in SYMBOLS definition '%s'", bufp);
  return false;
}

// Autotranslated from cfgfiles.c:1235
export function cnf_line_QT_TILEWIDTH(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:1249
export function cnf_line_QT_TILEHEIGHT(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:1263
export function cnf_line_QT_FONTSIZE(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:1277
export function cnf_line_QT_COMPACT(bufp) {
  nhUse(bufp);
  return true;
}

// Autotranslated from cfgfiles.c:1484
export function config_error_nextline(line) {
  let ced = config_error_data;
  if (!ced) return false;
  if (ced.num_errors && ced.secure) return false;
  ced.line_num++;
  ced.origline_shown = false;
  if (line && line[0]) {
    strncpy(ced.origline, line, sizeof (ced.origline) - 1);
    ced.origline[sizeof (ced.origline) - 1] = '\0';
  }
  else {
    ced.origline[0] = '\0';
  }
  return true;
}

// Autotranslated from cfgfiles.c:1507
export function l_get_config_errors(L) {
  let dat = config_error_msg, tmp, idx = 1;
  lua_newtable(L);
  while (dat) {
    lua_pushinteger(L, idx++);
    lua_newtable(L);
    nhl_add_table_entry_int(L, "line", dat.line_num);
    nhl_add_table_entry_str(L, "error", dat.errormsg);
    lua_settable(L, -3);
    tmp = dat.next;
    (dat.errormsg, 0);
    dat.errormsg =  0;
    (dat, 0);
    dat = tmp;
  }
  config_error_msg =  0;
  return 1;
}

// Autotranslated from cfgfiles.c:1668
export function cnf_parser_done(parser) {
  parser.ep = 0;
  if (parser.inbuf) (parser.inbuf, 0), parser.inbuf = 0;
  if (parser.buf) (parser.buf, 0), parser.buf = 0;
}

// Autotranslated from cfgfiles.c:1866
export function vconfig_error_add(str, the_args) {
  let vlen = 0, buf;
  vlen = vsnprintf(buf, buf.length, str, the_args);
  if (vlen >=  buf.length) panic("%s: truncation of buffer at %zu of %d bytes", "config_error_add", buf.length, vlen);
  buf[BUFSZ - 1] = '\0';
  config_erradd(buf);
}

// Autotranslated from cfgfiles.c:1886
export function assure_syscf_file() {
  let fd;
  fd = open(SYSCF_FILE, O_RDONLY);
  if (fd >= 0) { close(fd); return; }
  if (gd.deferred_showpaths) do_deferred_showpaths(1);
  raw_printf("Unable to open SYSCF_FILE.\n");
  exit(EXIT_FAILURE);
}

// Autotranslated from cfgfiles.c:461
export function choose_random_part(str, sep) {
  let nsep = 1, csep, len = 0, begin = str;
  if (!str) return  0;
  while ( str) {
    if ( str === sep) nsep++;
    str++;
  }
  csep = rn2(nsep);
  str = begin;
  while ((csep > 0) && str) {
    str++;
    if ( str === sep) csep--;
  }
  if ( str) {
    if ( str === sep) str++;
    begin = str;
    while ( str && str !== sep) {
      str++;
      len++;
    }
     str = '\x00';
    if (len) return begin;
  }
  return  0;
}

// Autotranslated from cfgfiles.c:166
export function do_write_config_file(game) {
  let fp, tmp;
  if (!configfile[0]) {
    pline("Strange, could not figure out config file name.");
    return ECMD_OK;
  }
  if (game.flags.suppress_alert < FEATURE_NOTICE_VER(3,7,0)) {
    pline("Warning: saveoptions is highly experimental!");
    wait_synch();
    pline("Some settings are not saved!");
    wait_synch();
    pline("All manual customization and comments are removed" + " from the file!");
    wait_synch();
  }
  Sprintf(tmp, overwrite_prompt, Math.trunc(BUFSZ - overwrite_prompt.length - 2), configfile);
  if (!paranoid_query(true, tmp)) return ECMD_OK;
  fp = fopen(configfile, "w");
  if (fp) {
    let len, wrote, buf;
    strbuf_init( buf);
    all_options_strbuf( buf);
    len = strlen(buf.str);
    wrote = fwrite(buf.str, 1, len, fp);
    fclose(fp);
    strbuf_empty( buf);
    if (wrote !== len) pline("An error occurred, wrote only partial data (%zu/%zu).", wrote, len);
  }
  return ECMD_OK;
}

// Autotranslated from cfgfiles.c:1018
export function cnf_line_MAX_STATUENAME_RANK(bufp) {
  let n = atoi(bufp);
  if (n < 1) {
    config_error_add("Illegal value in_ MAX_STATUENAME_RANK" + " (minimum is 1)");
    n = 10;
  }
  sysopt.tt_oname_maxrank = n;
  return true;
}

// Autotranslated from cfgfiles.c:1032
export function cnf_line_LIVELOG(bufp) {
  let L = strtol(bufp, null, 0);
  if (L < 0 || L > 0xffff) {
    config_error_add("Illegal value for LIVELOG" + " (must be between 0 and 0xFFFF).");
    return 0;
  }
  sysopt.livelog = L;
  return true;
}
